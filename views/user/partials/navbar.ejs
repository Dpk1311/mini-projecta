<nav class="p-5 bg-black shadow md:flex md:items-center md:justify-between">
  <div class="flex justify-between items-center ">
    <span class=" text-white text-2xl font-[Poppins] cursor-pointer">
      V A S T R A
    </span>

    <span class=" text-white text-3xl cursor-pointer mx-2 md:hidden block">
      <ion-icon name="menu" onclick="Menu(this)" style="z-index: 10;"></ion-icon>
    </span>
  </div>

  <ul class="md:flex md:items-center z-[-1] md:z-auto md:static absolute bg-black w-full left-0 md:w-auto md:py-0 py-4 md:pl-0 pl-7 md:opacity-100 opacity-0 top-[-400px] transition-all ease-in duration-500" style="z-index: 9;">
    <li class="mx-4 my-6 md:my-0">
      <a href="/" class="text-white text-xl hover:text-cyan-500 duration-500">HOME</a>
    </li>
    <li class="mx-4 my-6 md:my-0">
      <a href="#" class="text-white text-xl hover:text-cyan-500 duration-500">SERVICE</a>
    </li>
    <li class="mx-4 my-6 md:my-0">
      <a href="#" class="text-white text-xl hover:text-cyan-500 duration-500">ABOUT</a>
    </li> 
    <li class="mx-4 my-6 md:my-0">
      <a href="#" class="text-white text-xl hover:text-cyan-500 duration-500">CONTACT</a>
    </li>
    <li class="mx-4 my-6 md:my-0">
      <a href="/cart" class="text-white text-xl hover:text-cyan-500 duration-500">CART</a>
    </li>
    
<% if(user){ %>
  <div class="relative inline-block text-left">
    <button class="bg-cyan-400 text-white font-[Poppins] duration-500 px-6 py-2 mx-4 hover:bg-cyan-500 rounded" onclick="toggleDropdown()">
      <%= user.name %>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"
           class="inline-block w-4 h-4 ml-2 -mt-1">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg>
    </button>
    <div id="userDropdown" class="hidden absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none">
      <!-- Dropdown content here -->
      <a href="/userprofile" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900">Profile</a>
      <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900">Settings</a>
      <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900">Sign out</a>
    </div>
  </div>
<%  }else{ %>
  <button class="bg-cyan-400 text-white font-[Poppins] duration-500 px-6 py-2 mx-4 hover:bg-cyan-500 rounded ">
    <a href="/login">LOGIN</a>
  </button>
  <% } %>
    
    <button class="bg-cyan-400 text-white font-[Poppins] duration-500 px-6 py-2 mx-4 hover:bg-cyan-500 rounded ">
      <a href="/logout">LOGOUT</a>
    </button>
  </ul>
</nav>


<script>
  function Menu(e){
    let list = document.querySelector('ul');
    e.name === 'menu' ? (e.name = "close",list.classList.add('top-[80px]') , list.classList.add('opacity-100')) :( e.name = "menu" ,list.classList.remove('top-[80px]'),list.classList.remove('opacity-100'))
  }

  function toggleDropdown() {
    const dropdown = document.getElementById('userDropdown');
    dropdown.classList.toggle('hidden');
  }

  // Close the dropdown when clicking outside
  document.addEventListener('click', (event) => {
    const dropdown = document.getElementById('userDropdown');
    const button = document.querySelector('.bg-cyan-400');

    if (button.contains(event.target) || dropdown.contains(event.target)) {
      return;
    }

    dropdown.classList.add('hidden');
  });
</script>